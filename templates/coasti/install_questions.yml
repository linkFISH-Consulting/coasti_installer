
coasti_version:
    type: str
    default: "unknown"
    when: true
    # we inject this via the `data` kwarg.
    # bug? with when=false, it does not end up in the anwers.yml

is_vcs_online:
    type: bool
    help: Do you want to use a remote git repo as origin?
    default: yes

vcs_online_repo:
    type: str
    help: What is the url of the remote repo?
    when: "{{ is_vcs_online }}"

vcs_auth_type:
    type: str
    help: "How to authenticate with the remote repo?"
    choices:
        - "skip"
        - "Auth Token"
        - "SSH Key"
    default: "skip"
    when: "{{ is_vcs_online }}"

vcs_auth_token:
    type: str
    help: "Enter your auth token:"
    secret: true
    placeholder: github_pat_123...
    default:  ""
    when: "{{ is_vcs_online and vcs_auth_type == 'Auth Token' }}"
    # saved in config/secrests/vcs_auth_coasti (because we als keep vcs_auth_product_xyz)

vcs_auth_sshkeypath:
    type: str
    help: "Enter the absolute file path to an ssh key-pair:"
    default:  "{{ '~/.ssh/id_rsa' | expanduser}}"
    when: "{{ is_vcs_online and vcs_auth_type == 'SSH Key' }}"


sample_pass:
    help: "Sample Secret, auto-generated. (random 64 char alphanumeric)"
    secret: true
    default: "{{ 64|ans_random|hash('sha512') }}"
    # TODO: we would like to check if the file already exists in the destination
    # but the requires file-io which is not a default jinja2 filter.
    # thus, easier to do this programmatically from the python side.
    # likely, each content package should define something like `sample_pass_file`
    # so we can check easier.
