_min_copier_version: 9.11.3


_message_after_copy: |
    Coasti folder structure created at "{{ _copier_conf.dst_path }}"

    Next steps:

    1. Change directory to the project root:

       $ cd {{ _copier_conf.dst_path }}

    2. See "README.md" and start coding.

    3. Add products, see `coasti product --help`

_answers_file: .coasti-setup-answers.yml

_exclude:
    - copier.yml

# questions
is_vsc_online:
    type: bool
    help: Should we init Online Version Control?
    default: yes

vsc_online_repo:
    type: str
    help: What is the url of the remote repo?
    when: "{{ is_vsc_online }}"

auth_test_token:
    help: "This should only end up in config/secrets. (default: random 64 char alphanumeric)"
    secret: true
    default: "{{ 64|ans_random|hash('sha512') }}"
    # TODO: we would like to check if the file already exists in the destination
    # but the requires file-io which is not a default jinja2 filter.
    # thus, easier to do this programmatically from the python side.
    # likely, each content package should define something like `auth_test_token_file`
    # so we can check easier.

_tasks:
    - command: "git init"
      when: "{{ _copier_operation == 'copy' }}"
    - command: "git add .; git commit -m 'Coasti init'"
      when: "{{ _copier_operation == 'copy' }}"
